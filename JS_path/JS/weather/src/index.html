<!DOCTYPE html>
<html lang="en">
<head>
    <title>Weather App</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- <link rel="stylesheet" href="normalize.css" />
    <link rel="stylesheet" href="styles.css" /> -->

</head>

<body>
    <div>
        <form id="form">
            <input id="search" type="text" placeholder="Search">
            <button id="submit-city" type="submit"></button>
        </form>

        <div>
            <button id="toggle-degree">C</button>
            <p id="city">City</p>
            <p id="temp">Temp</p>
            <img src="" id="weather"></img>
        </div>

        <div id="suggestion-box">
            <p>Click for suggestions</p>
        </div>
    </div>

    <script src='index.bundle.js'></script>
    <script async
        src="<%= htmlWebpackPlugin.options.gmapsAPI %>">
    </script>

    <script>
        let search;
        function initAutocomplete() {
        autocomplete = new google.maps.place.Autocomplete(
            document.getElementById('search'),
            {
                types: [''],
                componentRestrictions: {'country': ['US']},
                fields: ['place_id', 'geometry', 'name']
            });
        search.focus();
        // When the user selects an address from the drop-down, populate the
        // address fields in the form.
        autocomplete.addListener("place_changed", fillInAddress);
        }

        function fillInAddress() {
            // Get the place details from the autocomplete object.
            const place = autocomplete.getPlace();

            // Get each component of the address from the place details,
            // and then fill-in the corresponding field on the form.
            // place.address_components are google.maps.GeocoderAddressComponent objects
            // which are documented at http://goo.gle/3l5i5Mr
            for (const component of place.address_components) {
                // @ts-ignore remove once typings fixed
                const componentType = component.types[0];

                switch (componentType) {

                case "locality":
                    document.querySelector("#search").value = component.long_name;
                    break;
            }
        }
    }
    window.initAutocomplete = initAutocomplete;
    </script>
</body>